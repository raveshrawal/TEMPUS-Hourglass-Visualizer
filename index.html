<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hourglass Problem Visualizer - Solve Time Puzzle Online</title>
    <meta name="description" content="Interactive hourglass puzzle simulator to solve time problems like 7 and 4 minute hourglass.">
    <meta name="keywords" content="hourglass puzzle, time puzzle solver, hourglass simulator">

    <link rel="stylesheet" href="style.css">

</head>
<body>

<!-- HEADER -->
<header>
    <div class="logo">
        <span>Tempus</span>
        <em>hourglass visualizer</em>
        <button class="theme-toggle" id="themeToggle" title="Toggle theme">
            <span class="icon-sun">☀</span>
            <span class="icon-moon">☽</span>
        </button>
    </div>

    <div class="hdr-center">
        <div class="clk-lbl">ELAPSED TIME</div>
        <div class="clk-val" id="clkVal">00:00:00</div>
        <div class="clk-jumps">
            <button class="btn-gj neg" data-d="-60">−1m</button>
            <button class="btn-gj neg" data-d="-10">−10s</button>
            <button class="btn-gj" data-d="10">+10s</button>
            <button class="btn-gj" data-d="60">+1m</button>
        </div>
        <div class="ap-banner" id="apBanner">⚠ AUTO-PAUSED — MANAGE FLIPS THEN START</div>
    </div>

    <div class="hdr-right">
        <div class="goal-done" id="goalDone">✓ GOAL REACHED</div>
        <div class="hdr-flips">TOTAL FLIPS <strong id="hdrFlips">0</strong></div>
    </div>
</header>
<div class="goal-bar-wrap" id="goalBarWrap">
    <div class="goal-bar-fill" id="goalBarFill" style="width:0%"></div>
</div>

<div class="layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">

        <!-- NEW HOURGLASS SECTION -->
        <section>
            <div class="sec-lbl">New Hourglass</div>
            <div class="add-form">
                <div class="f-row">
                    <label class="f-lbl">NAME (blank = auto A, B, C…)</label>
                    <input class="f-in" id="iName" placeholder="e.g. Pomodoro" maxlength="20">
                </div>
                <div class="f-row">
                    <label class="f-lbl">CAPACITY</label>
                    <div class="f-2c">
                        <div class="f-col">
                            <input class="f-in" id="iMin" type="number" placeholder="0" min="0" max="59">
                            <div class="f-unit">MIN</div>
                        </div>
                        <div class="f-col">
                            <input class="f-in" id="iSec" type="number" placeholder="30" min="0" max="59">
                            <div class="f-unit">SEC</div>
                        </div>
                    </div>
                    <div class="f-err" id="capErr"></div>
                </div>
                <button class="btn-add" id="btnAdd">＋ ADD HOURGLASS</button>
            </div>
        </section>

        <!-- SESSION GOAL SECTION (SEPARATE) -->
        <section>
            <div class="sec-lbl">Session Goal</div>
            <div class="goal-display" id="goalDisplay">
                <span class="g-lbl">CURRENT GOAL</span>
                <span class="g-val" id="goalVal">— NO GOAL —</span>
            </div>
            <div class="f-row" style="margin-bottom:.5rem">
                <label class="f-lbl">SET NEW GOAL</label>
                <div class="f-2c">
                    <div class="f-col">
                        <input class="f-in" id="gMin" type="number" placeholder="0" min="0" max="59">
                        <div class="f-unit">MIN</div>
                    </div>
                    <div class="f-col">
                        <input class="f-in" id="gSec" type="number" placeholder="0" min="0" max="59">
                        <div class="f-unit">SEC</div>
                    </div>
                </div>
                <div class="f-err" id="goalErr"></div>
            </div>
            <div class="goal-btns">
                <button class="btn-goal set" id="btnSetGoal">✓ SET GOAL</button>
                <button class="btn-goal clr" id="btnClrGoal">✕ CLEAR</button>
            </div>
        </section>

        <section>
            <div class="sec-lbl">Controls</div>
            <div class="ctrls">
                <div class="c-row">
                    <button class="btn-c" id="btnStart">▶ START</button>
                    <button class="btn-c" id="btnPause">⏸ PAUSE</button>
                </div>
                <div class="c-row">
                    <button class="btn-c dng" id="btnReset">↺ RESET ALL</button>
                </div>
                <div class="spd-row">
                    <span class="spd-lbl">SPEED</span>
                    <button class="btn-spd" data-s=".5">½×</button>
                    <button class="btn-spd on" data-s="1">1×</button>
                    <button class="btn-spd" data-s="2">2×</button>
                    <button class="btn-spd" data-s="4">4×</button>
                </div>
            </div>
        </section>

        <section>
            <div class="sec-lbl">Statistics</div>
            <div class="stats-g">
                <div class="sb">
                    <div class="v" id="stTotal">0</div>
                    <div class="l">TOTAL</div>
                </div>
                <div class="sb">
                    <div class="v" id="stRun">0</div>
                    <div class="l">RUNNING</div>
                </div>
                <div class="sb">
                    <div class="v" id="stEmp">0</div>
                    <div class="l">EMPTY</div>
                </div>
                <div class="sb">
                    <div class="v" id="stPau">0</div>
                    <div class="l">PAUSED</div>
                </div>
                <div class="sb gv" style="grid-column:1/-1">
                    <div class="v" id="stFlips">0</div>
                    <div class="l">TOTAL FLIPS</div>
                </div>
            </div>
        </section>

    </aside>

    <!-- MAIN -->
    <main class="main">
        <div class="main-top">
            <div class="hg-cnt" id="hgCnt">0 hourglasses</div>
            <button class="btn-clr" id="btnClrAll">CLEAR ALL</button>
        </div>
        <div class="hg-grid" id="hgGrid">
            <div class="empty-st">
                <div class="big">⧗</div>
                <p>ADD AN HOURGLASS TO BEGIN</p></div>
        </div>
        <!-- FLIP LOG -->
        <div class="log-section">
            <div class="log-hdr" id="logToggle">
                <span class="log-hdr-t">⧖ Flip Event Log</span>
                <span class="log-tog" id="logTxt">▾ EXPAND</span>
            </div>
            <div class="log-body" id="logBody">
                <table class="log-tbl">
                    <thead>
                    <tr>
                        <th>GLOBAL TIME</th>
                        <th>GLASS</th>
                        <th>REMAINING</th>
                        <th>GLASS ELAPSED</th>
                    </tr>
                    </thead>
                    <tbody id="logTbody">
                    <tr class="log-nil">
                        <td colspan="4">No flips recorded yet</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>

<!-- FLIP MODAL -->
<div class="modal-bg" id="flipBg">
    <div class="modal">
        <div class="modal-head">
            <div>
                <div class="modal-ttl">Manage Flips</div>
                <div class="modal-sub">Check any hourglass to flip it — empty glasses are pre-selected</div>
            </div>
        </div>
        <div class="modal-body" id="flipBody"></div>
        <div class="modal-foot">
            <button class="btn-mf prim" id="btnFlipStart">⇅ Flip Selected &amp; Start</button>
            <button class="btn-mf sec" id="btnSkipStart">▶ Skip &amp; Start</button>
            <button class="btn-mf gho" id="btnMCancel">Cancel</button>
        </div>
    </div>
</div>

<div class="ntf-wrap" id="ntfWrap"></div>
<script src="script.js"></script>
</body>
</html>
