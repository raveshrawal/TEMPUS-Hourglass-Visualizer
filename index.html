<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TEMPUS — Hourglass Visualizer</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300&family=Space+Mono:wght@400;700&display=swap');

:root {
  --bg:#0a0805; --surface:#120e09; --surface2:#1c1610; --surface3:#221a0f;
  --border:#2a2018; --border2:#3a3020;
  --sand-dark:#c47a2b; --sand-light:#f5c97a;
  --text-pri:#f0e6d0; --text-sec:#8a7a66; --text-dim:#4a3e30;
  --accent:#e8a84c; --accent-dim:rgba(232,168,76,.22);
  --green:#a8e84c; --green-dim:rgba(168,232,76,.18);
  --red:#e85c4c; --red-dim:rgba(232,92,76,.15);
  --blue:#6b9db8;
  --run:#e8a84c; --pau:#6b9db8; --idl:#8a7a66; --emp:#a8e84c;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text-pri);font-family:'Space Mono',monospace;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 60% 40% at 50% 0%,rgba(196,122,43,.07) 0%,transparent 60%),radial-gradient(ellipse 40% 60% at 100% 50%,rgba(232,168,76,.03) 0%,transparent 50%);pointer-events:none;z-index:0}

/* ── HEADER ── */
header{position:sticky;top:0;z-index:200;background:rgba(10,8,5,.95);backdrop-filter:blur(14px);border-bottom:1px solid var(--border);padding:0 1.5rem;display:flex;align-items:center;justify-content:space-between;height:60px;gap:1rem}
.logo{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:300;letter-spacing:.3em;color:var(--accent);text-transform:uppercase;white-space:nowrap}
.logo span{font-style:italic;color:var(--text-sec);font-size:.8rem;letter-spacing:.1em;margin-left:.8rem}
.header-center{display:flex;flex-direction:column;align-items:center;gap:.1rem}
.elapsed-label{font-size:.52rem;letter-spacing:.2em;color:var(--text-dim)}
.elapsed-val{font-size:1.3rem;font-weight:700;color:var(--accent);letter-spacing:.08em;font-variant-numeric:tabular-nums}
/* global jump buttons */
.elapsed-jumps{display:flex;gap:.25rem;margin-top:.15rem}
.btn-gjump{background:var(--surface2);border:1px solid var(--border);color:var(--text-sec);padding:.15rem .4rem;font-family:'Space Mono',monospace;font-size:.52rem;cursor:pointer;letter-spacing:.04em;transition:all .15s}
.btn-gjump:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}
.btn-gjump.minus:hover:not(:disabled){border-color:var(--red);color:var(--red)}
.btn-gjump:disabled{opacity:.25;cursor:not-allowed}
.header-right{display:flex;flex-direction:column;align-items:flex-end;gap:.2rem}
.total-flips-badge{font-size:.55rem;color:var(--text-sec);letter-spacing:.12em}
.total-flips-badge strong{color:var(--green);font-size:.7rem}
@keyframes blinkAnim{0%,100%{opacity:1}50%{opacity:.3}}

/* ── LAYOUT ── */
.layout{display:grid;grid-template-columns:270px 1fr;min-height:calc(100vh - 60px);position:relative;z-index:1}

/* ── SIDEBAR ── */
.sidebar{background:var(--surface);border-right:1px solid var(--border);padding:1.25rem;display:flex;flex-direction:column;gap:1.25rem;overflow-y:auto}
.section-label{font-size:.55rem;letter-spacing:.28em;color:var(--text-dim);text-transform:uppercase;padding-bottom:.4rem;border-bottom:1px solid var(--border);margin-bottom:.55rem}

/* ── ADD FORM ── */
.add-form{display:flex;flex-direction:column;gap:.6rem}
.form-row{display:flex;flex-direction:column;gap:.22rem}
.form-label{font-size:.55rem;letter-spacing:.16em;color:var(--text-sec)}
.form-input{background:var(--surface2);border:1px solid var(--border);color:var(--text-pri);padding:.42rem .6rem;font-family:'Space Mono',monospace;font-size:.72rem;outline:none;transition:border-color .2s;width:100%}
.form-input:focus{border-color:var(--accent)}
.form-input.error{border-color:var(--red)}
.form-error{font-size:.55rem;color:var(--red);min-height:.8rem}
.cap-row{display:flex;gap:.4rem}
.cap-field{flex:1;display:flex;flex-direction:column;gap:.22rem}
.cap-unit{font-size:.5rem;color:var(--text-dim);letter-spacing:.1em;text-align:center;margin-top:.08rem}
.btn-add{background:var(--accent);color:var(--bg);border:none;padding:.55rem .9rem;font-family:'Space Mono',monospace;font-size:.65rem;letter-spacing:.15em;cursor:pointer;text-transform:uppercase;transition:all .2s;font-weight:700}
.btn-add:hover{background:var(--sand-light);transform:translateY(-1px)}

/* ── CONTROLS ── */
.controls{display:flex;flex-direction:column;gap:.6rem}
.ctrl-row{display:flex;gap:.4rem}
.btn-ctrl{flex:1;background:var(--surface2);border:1px solid var(--border);color:var(--text-pri);padding:.45rem .2rem;font-family:'Space Mono',monospace;font-size:.6rem;cursor:pointer;letter-spacing:.07em;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.2rem}
.btn-ctrl:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}
.btn-ctrl:disabled{opacity:.28;cursor:not-allowed}
.btn-ctrl.active{background:var(--accent-dim);border-color:var(--accent);color:var(--accent)}
.btn-ctrl.danger:hover:not(:disabled){border-color:var(--red);color:var(--red)}
.speed-row{display:flex;gap:.3rem;align-items:center}
.speed-label{font-size:.55rem;color:var(--text-sec);letter-spacing:.1em;white-space:nowrap}
.btn-speed{flex:1;background:var(--surface2);border:1px solid var(--border);color:var(--text-sec);padding:.28rem .1rem;font-family:'Space Mono',monospace;font-size:.58rem;cursor:pointer;transition:all .2s;text-align:center}
.btn-speed.active{background:var(--accent-dim);border-color:var(--accent);color:var(--accent)}
.btn-speed:hover:not(.active){border-color:var(--text-sec);color:var(--text-pri)}

/* ── STATS ── */
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:.4rem}
.stat-box{background:var(--surface2);border:1px solid var(--border);padding:.5rem;text-align:center}
.stat-box .val{font-size:1rem;color:var(--accent);font-weight:700}
.stat-box .lbl{font-size:.5rem;color:var(--text-dim);letter-spacing:.1em;margin-top:.12rem}
.stat-box.flip-stat .val{color:var(--green)}

/* ── MAIN ── */
.main{display:flex;flex-direction:column;overflow-y:auto}
.main-top{padding:1.25rem 1.5rem .75rem;display:flex;justify-content:space-between;align-items:center}
.hg-count{font-size:.6rem;color:var(--text-sec);letter-spacing:.14em}
.btn-clear-all{background:none;border:1px solid var(--border);color:var(--text-sec);padding:.28rem .65rem;font-family:'Space Mono',monospace;font-size:.56rem;cursor:pointer;letter-spacing:.1em;transition:all .2s}
.btn-clear-all:hover{border-color:var(--red);color:var(--red)}
.hg-grid{padding:0 1.5rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(185px,1fr));gap:1.1rem}
.empty-state{grid-column:1/-1;text-align:center;padding:5rem 2rem;color:var(--text-dim)}
.empty-state .big{font-family:'Cormorant Garamond',serif;font-size:3.5rem;font-weight:300;opacity:.2;margin-bottom:.8rem}
.empty-state p{font-size:.65rem;letter-spacing:.15em}

/* ── HOURGLASS CARD ── */
.hg-card{background:var(--surface);border:1px solid var(--border);padding:.75rem .7rem;display:flex;flex-direction:column;align-items:center;gap:.48rem;transition:border-color .3s,box-shadow .3s;position:relative;overflow:hidden}
.hg-card::after{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% 100%,rgba(232,168,76,.05),transparent 70%);opacity:0;transition:opacity .4s;pointer-events:none}
.hg-card.running::after{opacity:1}
.hg-card.empty{border-color:rgba(168,232,76,.5);animation:emptyPulse 1.1s ease-in-out infinite}
@keyframes emptyPulse{0%,100%{box-shadow:0 0 0 0 rgba(168,232,76,.06)}50%{box-shadow:0 0 18px 4px rgba(168,232,76,.14)}}
.flip-me-banner{display:none;position:absolute;top:0;left:0;right:0;background:var(--green);color:#0c1a00;font-size:.5rem;font-weight:700;letter-spacing:.22em;text-align:center;padding:.14rem;text-transform:uppercase;animation:blinkAnim .8s ease-in-out infinite}
.hg-card.empty .flip-me-banner{display:block}

.hg-card-header{width:100%;display:flex;justify-content:space-between;align-items:flex-start;margin-top:.55rem}
.hg-id{font-size:.5rem;color:var(--accent);letter-spacing:.14em}
.hg-name{font-family:'Cormorant Garamond',serif;font-size:.9rem;font-weight:400;color:var(--text-pri);text-align:right;max-width:115px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.btn-remove{position:absolute;top:1.3rem;right:.4rem;width:16px;height:16px;background:none;border:none;color:var(--text-dim);font-size:13px;cursor:pointer;transition:color .2s;display:flex;align-items:center;justify-content:center}
.btn-remove:hover{color:var(--red)}

/* ── SVG ── */
.hg-visual{width:76px;height:114px;flex-shrink:0}
.hg-svg{width:100%;height:100%;overflow:visible}
.hg-svg.flipping{animation:flipAnim .65s cubic-bezier(.68,-.55,.27,1.55) forwards;transform-origin:center}
@keyframes flipAnim{0%{transform:rotate(0deg)}50%{transform:rotate(90deg) scale(.8)}100%{transform:rotate(180deg)}}
.sand-flow{animation:sandDrop .38s linear infinite}
@keyframes sandDrop{0%{transform:translateY(-2px);opacity:1}100%{transform:translateY(4px);opacity:0}}

/* ── STATUS ── */
.hg-status{font-size:.5rem;letter-spacing:.18em;padding:.15rem .4rem;border:1px solid;text-transform:uppercase}
.hg-status.running{color:var(--run);border-color:var(--run);background:rgba(232,168,76,.07)}
.hg-status